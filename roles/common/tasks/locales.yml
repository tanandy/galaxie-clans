---
- name: Check if {{ common_primary_local }} locale present
  tags: locales
  locale_gen:
    name: "{{ item }}"
    state: present
  loop:
    - "{{ common_primary_local }}"
    - "{{ common_secondary_local }}"
  register: locale_gen_status

- name: Update and Set locale
  tags: locales
  command: >-
    /usr/sbin/update-locale LANG={{ common_primary_local }} LANGUAGE={{ common_language }}
  when:
    - locale_gen_status.changed

- name: Set timezone
  timezone:
    name: "{{ common_tzdata_areas }}/{{ common_tzdata_zones }}"

- name: Install manpages in desired language
  apt:
    pkg:
      - "manpages-{{ common_language }}"
